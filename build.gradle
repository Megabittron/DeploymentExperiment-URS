evaluationDependsOn ":client"
evaluationDependsOn ":server"


// Assumes our dev database is named "dev"
task clearMongoDB(type: Exec) {
    group = "application"
    executable "mongo"
    args = ["dev", "--eval", "printjson(db.dropDatabase())"]
}

task seedUserData(type: Exec) {
    executable = "mongoimport"
    args = ["-d", "dev", "-c", "users", "--file", "users.seed.json", "--jsonArray"]
}

task seedAbstractData(type: Exec) {
    executable = "mongoimport"
    args = ["-d", "dev", "-c", "abstracts", "--file", "abstracts.seed.json", "--jsonArray"]
}

task seedReviewGroupData(type: Exec) {
    executable = "mongoimport"
    args = ["-d", "dev", "-c", "reviewGroups", "--file", "reviewGroups.seed.json", "--jsonArray"]
}

task seedDisciplinesData(type: Exec) {
    executable = "mongoimport"
    args = ["-d", "dev", "-c", "disciplines", "--file", "disciplines.seed.json", "--jsonArray"]
}

task seedSponsoredOrganizations(type: Exec) {
    executable = "mongoimport"
    args = ["-d", "dev", "-c", "sponsoredOrganizations", "--file", "sponsoredOrganizations.seed.json", "--jsonArray"]
}

task seedCategories(type: Exec) {
    executable = "mongoimport"
    args = ["-d", "dev", "-c", "categories", "--file", "categories.seed.json", "--jsonArray"]
}

task seedMongoDB {
    group = "application"
}
seedMongoDB.dependsOn(clearMongoDB)
seedMongoDB.dependsOn(seedUserData)
seedMongoDB.dependsOn(seedAbstractData)
seedMongoDB.dependsOn(seedReviewGroupData)
seedMongoDB.dependsOn(seedDisciplinesData)
seedMongoDB.dependsOn(seedSponsoredOrganizations)
seedMongoDB.dependsOn(seedCategories)

